{%extends 'new_base.html'%}
{%load static%}
{%block content%}
<style>

#firstbox{
  background-color: white;
  height: auto;
  float: right;
  width: 58%;
  margin-right: 11%;
  border-radius: 15px;
}
#firstbox div{
  float: left;
}
#firstbox label{
  margin-left: 60px;
  padding-top: 5px;
  color: #58B7AA;
  font-weight: 400;
  font-size: 20px;
  margin-top: 30px;
  width: 240px;
}

.Search{
  margin-top: 3%;
  float: right;
  margin-right: 9%;
  padding-left: 3%;
  padding-right: 3%;
}
#box2{
  padding: 0.8% 5% 0.8% 4%;
  background-color: white;
  border-radius: 10px;
  float: left;
  margin-top: 0.5%;
  margin-left: 9%;
  width: 75%;
  margin-right: 6%;
}
#box2 h5,#box2 img{
  float: left;
  margin-right: 78px;
  color: #393D3D;
}
h5{
  font-weight: 400;
  margin-top: 10px;
  color:  #393D3D;
    width: 120px;
}
#hiddendiv{
  height: auto;
  width: 75%;
  float: right;

}
#box2 img{
  margin-top: 4px;
}
.drop{
    height: 40px;
    width: 480px;
    margin-left:0%;
    border-radius: 5px;
    margin-top: 0px;

}
@media (max-width:800px) and (min-width:360px){
  .drop{
    height: 40px;
    width: 230px;
    margin-left:0%;
    border-radius: 5px;
    margin-top: 0px;


}

  </style>
  
<div><label id="myprofile">ATTENDANCE</label>
<div id="firstbox" class="shadow p-3 bg-white">
    <div>
      <label>Select Department </label>&nbsp
       <select id="regdetailsdept" name="regdetails" class="drop" required>
       <option value=""> </option>
          {% for regdetails in edepartments %}
             <option value="{{ regdetails.department}}">{{ regdetails.department }}</option>
          {% endfor %}
      </select>
    </div>
<div>
      <label>Select Branch </label>&nbsp
        <select id="regdetailsDesig" name="regdetails" class="drop" required>
       </select>
    </div>

    <button id="btnSearch" type="button" class="btn btn-primary Search" >Search</button>
  </div>
</div>
<div id="hiddendiv">
</div>
<script type="text/javascript">
    $("#regdetailsdept").change(function () {
        <!-- const url = $("#personForm").attr("data-cities-url"); -->
        const deptId = $(this).val();

        $.ajax({
            url: 'adminempatte',
            data: {
                'dept_id': deptId
            },
            success: function (data) {
                $("#regdetailsDesig").html(data);
                console.log(data);
            }
        });

    });
    $("#btnSearch").click(function () {
        <!-- const url = $("#personForm").attr("data-cities-url"); -->
        const deptId = $("#regdetailsdept").val();
        const desgId = $("#regdetailsDesig").val();


        $.ajax({
            url: 'empat2',
            data: {
                'dept_id': deptId,
                'desig_id':desgId
            },
            success: function (data) {
                $("#hiddendiv").html(data);
            }
        });
    });
  function showDiv() {
      document.getElementById('hiddendiv').style.display = "block";
  }
</script>
{%endblock%}